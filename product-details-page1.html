<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- ver 11 -->
    <title>è•¾çµ²è–„ç´—å…¬ä¸»è£™</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="./assets/images/logo.png"
    />
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- link to css -->
    <link rel="stylesheet" href="product-details-page.css" />
  </head>
  <body class="zen-kaku-gothic-new-regular">
    <!-- é ‚éƒ¨å°èˆªæ¬„ -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand">KidTrendz</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">é¦–é </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./girls.html">å¥³è£</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./boys.html">ç”·è£</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./AboutUs.html">é—œæ–¼æˆ‘å€‘</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./login.html">ç™»éŒ„</a>
            </li>
          </ul>
          <!-- è³¼ç‰©è»ŠæŒ‰éˆ• -->
          <button
            class="btn btn-outline-primary position-relative"
            data-bs-toggle="modal"
            data-bs-target="#cartModal"
          >
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount" class="badge bg-danger badge-notification"
              >0</span
            >
          </button>
        </div>
      </div>
    </nav>
  </header>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container my-4">
      <div class="row">
        <!-- Bootstrap productCarouselï¼Œåˆªdata-ride å””ä¿¾è‡ªå‹•è½‰ç›¸ -->
        <div class="col-md-6">
          <div id="productCarousel" class="carousel slide">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  src="./assets/images/girl è•¾çµ²è–„ç´—å…¬ä¸»è£™1.webp"
                  class="d-block w-100"
                  alt="è•¾çµ²è–„ç´—å…¬ä¸»è£™"
                />
              </div>
              <div class="carousel-item">
                <img
                  src="./assets/images/girl è•¾çµ²è–„ç´—å…¬ä¸»è£™2.webp"
                  class="d-block w-100"
                  alt="è•¾çµ²è–„ç´—å…¬ä¸»è£™"
                />
              </div>
            </div>
            <!-- å°èˆªéµæ”¹ç”¨button, Bootstrap 5, data-slideï¼‹ data-target ---------------------------------------------------------->
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">ä¸Šä¸€å¼µ</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">ä¸‹ä¸€å¼µ</span>
            </button>
          </div>
        </div>

        <!-- å³é‚Šå•†å“è©³æƒ…card -------------------------------------------------------------------------->
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
              <!-- å•†å“åç¨± -->
              <h2 class="card-title">è•¾çµ²è–„ç´—å…¬ä¸»è£™</h2>
              <div class="d-flex align-items-center mb-3">
                <!-- é¡§å®¢è©•åˆ†æ˜Ÿæ˜Ÿ ------------------------------------------------------------------>
                <!-- fas: å¯¦å¿ƒæ˜Ÿ, fa-star-half-alt: åŠå¯¦å¿ƒæ˜Ÿ, far: ç©ºå¿ƒæ˜Ÿ -->
                <div class="me-2">
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star-half-alt text-warning"></i>
                  <i class="far fa-star text-warning"></i>
                </div>
                <span class="text-muted">(3å‰‡è©•åƒ¹)</span>
              </div>
              <p class="lead">$348.00</p>
              <p>
                å„ªé›…çš„å…¬ä¸»è£™ï¼Œçµåˆè•¾çµ²å’Œè–„ç´—ï¼Œå±¤æ¬¡æ„Ÿå¼·ï¼Œé©åˆå°å¥³å­©çš„å¤¢å¹»ç©¿æ­ï¼Œå®Œç¾å±•ç¾ç«¥è¶£èˆ‡é«˜é›…ã€‚
              </p>

              <!-- å°ºç¢¼é¸æ“‡ï¼ŒBootstrap 5 btn-groupï¼‹data-toggle="buttons" ---------------------->
              <div class="mb-4">
                <p class="fw-bold">è«‹é¸æ“‡å°ºç¢¼ï¼š</p>
                <div class="d-flex flex-wrap gap-2">
                  <button class="btn btn-outline-primary size-btn">110</button>
                  <button class="btn btn-outline-primary size-btn">120</button>
                  <button class="btn btn-outline-primary size-btn active">
                    130
                  </button>
                  <button class="btn btn-outline-primary size-btn">140</button>
                  <button class="btn btn-outline-primary size-btn">150</button>
                  <button class="btn btn-outline-primary size-btn">160</button>
                </div>
              </div>

              <!-- åŠ å…¥è³¼ç‰©è»ŠæŒ‰éˆ• -------------------------------------------------------------------------------------------------->
              <button id="addToCartBtn" class="btn btn-primary w-100 py-3">
                <i class="fas fa-shopping-cart me-2"></i>åŠ å…¥è³¼ç‰©è»Š
              </button>

              <!-- è©³ç´°è³‡æ–™ã€å¸ƒæ–™æˆä»½ã€è©•åƒ¹ ----------------------------------------------------------------------------------------------->
              <ul class="nav nav-tabs mt-4" id="productTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="desc-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#desc"
                    type="button"
                    role="tab"
                  >
                    å•†å“æè¿°
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="material-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#material"
                    type="button"
                    role="tab"
                  >
                    å•†å“ç‰©æ–™
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="reviews-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#reviews"
                    type="button"
                    role="tab"
                  >
                    é¡§å®¢è©•åƒ¹(3)
                  </button>
                </li>
              </ul>

              <!-- å•†å“æè¿° ----------------------------------------------------------------------------------------------->
              <div
                class="tab-content p-3 border border-top-0"
                id="productTabContent"
              >
                <div
                  class="tab-pane fade show active"
                  id="desc"
                  role="tabpanel"
                >
                  å„ªé›…çš„å…¬ä¸»è£™ï¼Œçµåˆè•¾çµ²å’Œè–„ç´—ï¼Œå±¤æ¬¡æ„Ÿå¼·ï¼Œé©åˆå°å¥³å­©çš„å¤¢å¹»ç©¿æ­ï¼Œå®Œç¾å±•ç¾ç«¥è¶£èˆ‡é«˜é›…ã€‚ç²¾å¿ƒè¨­è¨ˆçš„å‰ªè£ï¼Œè®“å°å¥³å­©åœ¨å„ç¨®å ´åˆéƒ½èƒ½æˆç‚ºç„¦é»ã€‚
                </div>

                <!-- å•†å“ç‰©æ–™ -->
                <div class="tab-pane fade" id="material" role="tabpanel">
                  ä¸Šèº«ï¼š100% æ£‰<br />
                  è£™æ“ºï¼š100% èšé…¯è–„ç´—<br />
                  æ£‰æä¾›èˆ’é©é€æ°£æ„Ÿï¼Œèšé…¯è–„ç´—å¢æ·»è¼•ç›ˆå±¤æ¬¡ã€‚<br /><br />
                  æ©Ÿæ´—å†·æ°´ï¼Œæº«å’Œå¾ªç’°ï¼Œä¸æ¼‚ç™½ï¼Œä½æº«çƒ˜ä¹¾ï¼Œæº«ç†±ç†¨ç‡™ã€‚é¿å…éåº¦æ‹‰æ‰¯è–„ç´—éƒ¨åˆ†ä»¥ä¿æŒå½¢ç‹€ã€‚<br /><br />
                  ç”¢åœ°ï¼šç¾åœ‹
                </div>
                <div class="tab-pane fade" id="reviews" role="tabpanel">
                  <!-- é¡§å®¢è©•åƒ¹ ---------------------------------------------------------->
                  <div class="review">
                    <div class="d-flex justify-content-between">
                      <strong>å¼µå°å§</strong>
                      <div>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                      </div>
                    </div>

                    <p class="mb-0">
                      ã€Œç²¾ç·»çš„è•¾çµ²èˆ‡æŸ”è»Ÿçš„è–„ç´—ï¼Œè®“å­©å­ç¬é–“è®Šèº«å°å…¬ä¸»ï¼Œè¶…æœ‰å¤¢å¹»æ„Ÿï¼ã€
                    </p>
                    <small class="text-muted">2023-05-15</small>
                  </div>
                  <hr />
                  <div class="review">
                    <div class="d-flex justify-content-between">
                      <strong>ç‹åª½åª½</strong>
                      <div>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="far fa-star text-warning"></i>
                      </div>
                    </div>
                    <p class="mb-0">
                      ã€Œè£™æ“ºå±¤æ¬¡è±å¯Œï¼Œé©åˆç‰¹åˆ¥å ´åˆç©¿æ­ï¼Œè³ªæ„Ÿè¶…ä¹é æœŸã€‚ã€
                    </p>
                    <small class="text-muted">2023-04-22</small>
                  </div>
                  <hr />
                  <div class="review">
                    <div class="d-flex justify-content-between">
                      <strong>æå¤ªå¤ª</strong>
                      <div>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star-half-alt text-warning"></i>
                      </div>
                    </div>
                    <p class="mb-0">
                      ã€Œç©¿ä¸Šé€™ä»¶å…¬ä¸»è£™ï¼Œå¥³å…’é–‹å¿ƒåˆ°ä¸è‚¯è„«ä¸‹ï¼ŒçœŸçš„å¤ªç¾äº†ï¼ã€
                    </p>
                    <small class="text-muted">2023-03-10</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ç†±è³£å•†å“card  ----------------------------------------------------------------------------------------------->
    <h4 style="text-align: center">
      <i class="fa-solid fa-fire"></i>
      ç†±è³£å•†å“
      <i class="fa-solid fa-fire"></i>
    </h4>
    <div class="hotsell">
      <div class="hotsellcard">
        <img
          src="./assets/images/girl å¤¢å¹»æ°´å½©èŠ±è£™1.webp"
          class="hotsellcard-img-top"
          alt="å¤¢å¹»æ°´å½©èŠ±è£™"
        />
        <div class="card-body">
          <h5 class="card-title">
            <a href="product-details-page7.html">å¤¢å¹»æ°´å½©èŠ±è£™</a>
          </h5>
          <p class="card-text">$383.00</p>
        </div>
      </div>

      <div class="hotsellcard">
        <img
          src="./assets/images/girl è—ç™½æ‹¼è‰²éŸ“æœ1.webp"
          class="hotsellcard-img-top"
          alt="è—ç™½æ‹¼è‰²éŸ“æœ"
        />
        <div class="card-body">
          <h5 class="card-title">
            <a href="product-details-page10.html">è—ç™½æ‹¼è‰²éŸ“æœ</a>
          </h5>
          <p class="card-text">$398.00</p>
        </div>
      </div>

      <div class="hotsellcard" style="width: 18rem">
        <img
          src="./assets/images/girl è´è¶çµé€£è¡£è£™1.webp"
          class="hotsellcard-img-top"
          alt="è´è¶çµé€£è¡£è£™"
        />
        <div class="card-body">
          <h5 class="card-title">
            <a href="product-details-page12.html">è´è¶çµé€£è¡£è£™</a>
          </h5>
          <p class="card-text">$393.00</p>
        </div>
      </div>

      <div class="hotsellcard" style="width: 18rem">
        <img
          src="./assets/images/girl å¡çš®å·´æ‹‰æ‘˜è˜‹æœTæ¤1.webp"
          class="hotsellcard-img-top"
          alt="å¡çš®å·´æ‹‰æ‘˜è˜‹æœTæ¤"
        />
        <div class="card-body">
          <h5 class="card-title">
            <a href="product-details-page2.html">å¡çš®å·´æ‹‰æ‘˜è˜‹æœTæ¤</a>
          </h5>
          <p class="card-text">$263.00</p>
        </div>
      </div>
    </div>

    <footer class="footer text-center">
      <div class="container mx-auto px-4">
        <p>&copy; 2025 Designer Kids Clothing. All rights reserved.</p>
        <p>Free delivery in Hong Kong on all orders for a limited time.</p>
      </div>
    </footer>
    <!------------------------------------------ è³¼ç‰©è»Šé¢æ¿ ---------------------------------------------------------------------------------------------------------------------->
    <div class="modal fade" id="cartModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">æ‚¨çš„è³¼ç‰©è»Š</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <table class="table">
              <thead>
                <tr>
                  <th>å•†å“</th>
                  <th>åƒ¹æ ¼</th>
                  <th>æ•¸é‡</th>
                  <th>å°è¨ˆ</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody id="cartItems">
                <!-- è³¼ç‰©è»Šé …ç›®æœƒå‹•æ…‹æ·»åŠ åœ¨é€™è£¡ -->
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3" class="text-end fw-bold">ç¸½è¨ˆ:</td>
                  <td id="cartTotal" class="fw-bold">HK$ 0</td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              ç¹¼çºŒè³¼ç‰©
            </button>
            <button type="button" class="btn btn-primary" id="checkoutBtn">
              å‰å¾€çµå¸³
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- çµè³¬é¢æ¿ -->
    <div class="modal fade" id="checkoutModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <!-- çµè³¬è³‡è¨Š -->
            <h5 class="modal-title">çµå¸³è³‡è¨Š</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="checkoutForm">
              <div class="mb-3">
                <label class="form-label">å§“å</label>
                <input type="text" class="form-control" required />
              </div>
              <div class="mb-3">
                <label class="form-label">é›»è©±</label>
                <input type="tel" class="form-control" required />
              </div>
              <div class="mb-3">
                <label class="form-label">åœ°å€</label>
                <input type="text" class="form-control" required />
              </div>

              <!-- ä»˜æ¬¾æ–¹å¼ -->
              <div class="mb-3">
                <label class="form-label">ä»˜æ¬¾æ–¹å¼</label>
                <select class="form-select" required>
                  <option value="">é¸æ“‡ä»˜æ¬¾æ–¹å¼</option>
                  <option value="credit">ä¿¡ç”¨å¡</option>
                  <option value="atm">éŠ€è¡Œè½‰å¸³</option>
                  <option value="cod">è²¨åˆ°ä»˜æ¬¾</option>
                </select>
              </div>
            </form>

            <!-- è«‹å–®æ‘˜è¦ -->
            <div class="alert alert-info mt-3">
              <h6>è¨‚å–®æ‘˜è¦</h6>
              <div id="orderSummary"></div>
              <hr />
              <p class="fw-bold">ç¸½è¨ˆ: <span id="orderTotal">HK$ 0</span></p>
            </div>
          </div>
          <div class="modal-footer">
            <!-- è¿”å›æˆ–ç¢ºèª -->
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              è¿”å›
            </button>
            <button type="button" class="btn btn-success" id="confirmOrderBtn">
              ç¢ºèªè¨‚å–®
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ç¢ºèªè¨‚å–®é¢æ¿ -->
    <div class="modal fade" id="orderConfirmModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">è¨‚å–®ç¢ºèª</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body text-center">
            <i class="fas fa-check-circle text-success fa-3x mb-3"></i>
            <h4 class="mt-3">æ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼</h4>
            <p>æ‚¨çš„è¨‚å–®å·²æˆåŠŸæäº¤ï¼Œæˆ‘å€‘å°‡ç›¡å¿«è™•ç†ã€‚</p>
            <div id="orderDetails" class="text-start mt-4"></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
            >
              å®Œæˆ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap 5 & jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!--  è³¼ç‰©è»Š JavaScript-----------------------------------------------------------------------------  -->
    <script>
      // è³¼ç‰©è»ŠæŒ‰éˆ•
      // localStorage.removeItem("cart");
      let cart = [];

      $(document).ready(function () {
        // è³¼ç‰©è»Šæ•¸æ“š
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // æ›´æ–°è³¼ç‰©è»Šç‰©å“æ•¸é‡é¡¥ç¤º
        function updateCartCount() {
          const count = cart.reduce((total, item) => total + item.quantity, 0);
          $("#cartCount").text(count);
        }

        // åŠ å…¥è³¼ç‰©è»ŠæŒ‰éˆ•é»æ“Šäº‹ä»¶
        $("#addToCartBtn").click(function () {
          const selectedSize = $(".size-btn.active").text();

          if (!selectedSize) {
            alert("è«‹é¸æ“‡å°ºç¢¼");
            return;
          }

          const product = {
            id: "princess-dress",
            // â€¼ï¸â€¼ï¸â€¼ï¸ğŸŒŸğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ç•™æ„path/hrefğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸŒŸâ€¼ï¸â€¼ï¸â€¼ï¸
            name: "è•¾çµ²è–„ç´—å…¬ä¸»è£™",
            price: 348.0,
            size: selectedSize,
            // â€¼ï¸â€¼ï¸â€¼ï¸ğŸŒŸğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ç•™æ„path/hrefğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸŒŸâ€¼ï¸â€¼ï¸â€¼ï¸
            image: "./assets/images/girl è•¾çµ²è–„ç´—å…¬ä¸»è£™1.webp",
            quantity: 1,
          };

          const existingItem = cart.find(
            (item) => item.id === product.id && item.size === product.size
          );

          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            cart.push(product);
          }

          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCount();

          // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
          const successMsg = $(
            '<div class="alert alert-success position-fixed top-0 start-50 translate-middle-x mt-3">å•†å“å·²åŠ å…¥è³¼ç‰©è»Šï¼</div>'
          );
          $("body").append(successMsg);
          setTimeout(() => successMsg.remove(), 2000);
        });

        // ç†±è³£å•†å“åŠ å…¥è³¼ç‰©è»Š
        $(".add-to-cart").click(function () {
          const id = $(this).data("id");
          const name = $(this).data("name");
          const price = $(this).data("price");

          const product = {
            id: id,
            name: name,
            price: price,
            size: "130",
            image: `https://via.placeholder.com/100x100?text=${name}`,
            quantity: 1,
          };

          const existingItem = cart.find(
            (item) => item.id === product.id && item.size === product.size
          );

          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            cart.push(product);
          }

          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCount();

          // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
          const successMsg = $(
            '<div class="alert alert-success position-fixed top-0 start-50 translate-middle-x mt-3">å•†å“å·²åŠ å…¥è³¼ç‰©è»Šï¼</div>'
          );
          $("body").append(successMsg);
          setTimeout(() => successMsg.remove(), 2000);
        });

        // å°ºç¢¼é¸æ“‡
        $(".size-btn").click(function () {
          $(".size-btn").removeClass("active");
          $(this).addClass("active");
        });

        // æ‰“é–‹è³¼ç‰©è»Šæ™‚æ›´æ–°å…§å®¹
        $("#cartModal").on("show.bs.modal", function () {
          updateCartModal();
        });

        // æ›´æ–°è³¼ç‰©è»Šæ¨¡æ…‹æ¡†å…§å®¹
        function updateCartModal() {
          const cartItemsEl = $("#cartItems");
          cartItemsEl.empty();

          if (cart.length === 0) {
            cartItemsEl.html(
              '<tr><td colspan="5" class="text-center">è³¼ç‰©è»Šæ˜¯ç©ºçš„</td></tr>'
            );
            $("#cartTotal").text("HK$ 0");
            return;
          }

          cart.forEach((item) => {
            const row = `
            <tr>
                <td>
                    <div class="d-flex align-items-center">
                        <img src="${item.image}" alt="${
              item.name
            }" style="width: 50px; height: 50px; object-fit: cover; margin-right: 10px;">
                        <div>
                            ${item.name}<br>
                            <small>å°ºç¢¼: ${item.size}</small>
                        </div>
                    </div>
                </td>
                <td>HK$ ${item.price}</td>
                <td>
                    <div class="input-group" style="width: 120px;">
                        <button class="btn btn-outline-secondary decrease-quantity" type="button" data-id="${
                          item.id
                        }" data-size="${item.size}">-</button>
                        <input type="text" class="form-control text-center quantity-input" value="${
                          item.quantity
                        }" data-id="${item.id}" data-size="${item.size}">
                        <button class="btn btn-outline-secondary increase-quantity" type="button" data-id="${
                          item.id
                        }" data-size="${item.size}">+</button>
                    </div>
                </td>
                <td>HK$ ${(item.price * item.quantity).toFixed(2)}</td>
                <td>
                    <button class="btn btn-danger btn-sm remove-item" data-id="${
                      item.id
                    }" data-size="${item.size}">
                        <i class="fas fa-trash"></i>
                    </button>
                </td>
            </tr>
            `;
            cartItemsEl.append(row);
          });

          const total = cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          $("#cartTotal").text(`HK$ ${total.toFixed(2)}`);
        }

        // æ¸›å°‘å•†å“æ•¸é‡
        $(document).on("click", ".decrease-quantity", function () {
          const id = $(this).data("id");
          const size = $(this).data("size");
          cart = JSON.parse(localStorage.getItem("cart")) || [];
          const itemIndex = cart.findIndex(
            (item) => item.id === id && item.size == size
          );

          if (itemIndex !== -1) {
            if (cart[itemIndex].quantity > 1) {
              cart[itemIndex].quantity -= 1;
            } else {
              cart.splice(itemIndex, 1);
            }
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            updateCartModal();
          }
        });

        // å¢åŠ å•†å“æ•¸é‡
        $(document).on("click", ".increase-quantity", function () {
          const id = $(this).data("id");
          const size = $(this).data("size");
          cart = JSON.parse(localStorage.getItem("cart")) || [];
          const itemIndex = cart.findIndex(
            (item) => item.id === id && item.size == size
          );

          if (itemIndex !== -1) {
            cart[itemIndex].quantity += 1;
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            updateCartModal();
          }
        });

        // æ‰‹å‹•ä¿®æ”¹æ•¸é‡
        $(document).on("change", ".quantity-input", function () {
          const id = $(this).data("id");
          const size = $(this).data("size");
          const newQuantity = parseInt($(this).val()) || 1;
          cart = JSON.parse(localStorage.getItem("cart")) || [];
          const itemIndex = cart.findIndex(
            (item) => item.id === id && item.size == size
          );

          if (itemIndex !== -1) {
            if (newQuantity > 0) {
              cart[itemIndex].quantity = newQuantity;
            } else {
              cart.splice(itemIndex, 1);
            }
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            updateCartModal();
          }
        });

        // åˆªé™¤å•†å“
        $(document).on("click", ".remove-item", function () {
          const id = $(this).data("id");
          const size = $(this).data("size");
          cart = JSON.parse(localStorage.getItem("cart")) || [];
          cart = cart.filter((item) => !(item.id === id && item.size == size));
          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCount();
          updateCartModal();
        });

        // çµè³¬æŒ‰éˆ•é»æ“Š
        $("#checkoutBtn").click(function () {
          if (cart.length === 0) {
            alert("è³¼ç‰©è»Šæ˜¯ç©ºçš„");
            return;
          }
          updateOrderSummary();
          $("#cartModal").modal("hide");
          $("#checkoutModal").modal("show");
        });

        // æ›´æ–°è¨‚å–®æ‘˜è¦
        function updateOrderSummary() {
          const orderSummaryEl = $("#orderSummary");
          orderSummaryEl.empty();

          cart.forEach((item) => {
            const itemEl = `
            <div class="d-flex justify-content-between">
                <span>${item.name} (å°ºç¢¼: ${item.size}) x ${
              item.quantity
            }</span>
                <span>HK$ ${(item.price * item.quantity).toFixed(2)}</span>
            </div>
            `;
            orderSummaryEl.append(itemEl);
          });

          const total = cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          $("#orderTotal").text(`HK$ ${total.toFixed(2)}`);
        }

        // ç¢ºèªè¨‚å–®æŒ‰éˆ•éˆ•
        $("#confirmOrderBtn").click(function () {
          const form = $("#checkoutForm")[0];
          if (!form.checkValidity()) {
            form.reportValidity();
            return;
          }

          // å‰µå»ºè¨‚å–®
          const order = {
            number: "ORD" + Date.now(),
            items: [...cart],
            total: cart.reduce(
              (sum, item) => sum + item.price * item.quantity,
              0
            ),
            customer: {
              name: $("#checkoutForm input").eq(0).val(),
              phone: $("#checkoutForm input").eq(1).val(),
              address: $("#checkoutForm input").eq(2).val(),
              payment: $("#checkoutForm select").val(),
            },
          };

          // é¡¯ç¤ºç¢ºèªä¿¡æ¯
          showOrderConfirmation(order);

          // æ¸…ç©ºè³¼ç‰©è»Š
          cart = [];
          localStorage.removeItem("cart");
          updateCartCount();

          // é—œé–‰æ¨¡æ…‹æ¡†
          $("#checkoutModal").modal("hide");
        });

        // é¡¯ç¤ºä»˜æ¬¾æ–¹å¼
        function showOrderConfirmation(order) {
          const paymentMethods = {
            credit: "ä¿¡ç”¨å¡",
            atm: "éŠ€è¡Œè½‰å¸³",
            cod: "è²¨åˆ°ä»˜æ¬¾",
          };

          const orderDetails = `
        <p><strong>è¨‚å–®ç·¨è™Ÿ:</strong> ${order.number}</p>
        <p><strong>å®¢æˆ¶å§“å:</strong> ${order.customer.name}</p>
        <p><strong>è¯çµ¡é›»è©±:</strong> ${order.customer.phone}</p>
        <p><strong>é€è²¨åœ°å€:</strong> ${order.customer.address}</p>
        <p><strong>ä»˜æ¬¾æ–¹å¼:</strong> ${
          paymentMethods[order.customer.payment] || "æœªçŸ¥"
        }</p>
        <hr>
        <h6>è¨‚å–®é …ç›®:</h6>
        <ul class="mb-0">
            ${order.items
              .map(
                (item) =>
                  `<li>${item.name} (å°ºç¢¼: ${item.size}) x ${
                    item.quantity
                  } - HK$ ${(item.price * item.quantity).toFixed(2)}</li>`
              )
              .join("")}
        </ul>
        <p class="fw-bold mt-2">ç¸½è¨ˆ: HK$ ${order.total.toFixed(2)}</p>
        `;

          $("#orderDetails").html(orderDetails);
          $("#orderConfirmModal").modal("show");
        }

        // åˆå§‹åŒ–è³¼ç‰©è»Š
        updateCartCount();
      });
    </script>
  </body>
</html>
